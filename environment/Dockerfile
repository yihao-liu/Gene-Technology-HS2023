# hash:sha256:57d1b146238d410dad287f21e00e21f026ff3f8a94de4178dabd3d19a57cdb27
FROM registry.codeocean.com/codeocean/miniconda3:4.7.10-cuda10.1-cudnn7-ubuntu18.04

ARG DEBIAN_FRONTEND=noninteractive

RUN conda install -c conda-forge libiconv

RUN conda install -c anaconda cmake 

RUN conda install -y --channel=conda-forge --channel=anaconda --channel=pytorch --channel=defaults \
        _libgcc_mutex==0.1 \
        _openmp_mutex==4.5 \
        absl-py==0.13.0 \
        aiohttp==3.7.4 \
        argcomplete==1.12.3 \
        argon2-cffi==20.1.0 \
        async-timeout==3.0.1 \
        async_generator==1.10 \
        attrs==21.2.0 \
        backcall==0.2.0 \
        blas==1.0 \
        bleach==4.0.0 \
        blinker==1.4 \
        brotlipy==0.7.0 \
        c-ares==1.17.1 \
        ca-certificates==2021.9.30 \
        cachetools==4.2.2 \
        captum==0.4.0 \
        certifi==2021.10.8 \
        cffi==1.14.6 \
        chardet==3.0.4 \
        click==8.0.1 \
        configparser==5.0.2 \
        coverage==5.5 \
        cryptography==3.4.7 \
        cudatoolkit==10.2.89 \
        cudnn==7.6.5 \
        cycler==0.10.0 \
        cython==0.29.24 \
        dbus==1.13.18 \
        debugpy==1.4.1 \
        decorator==5.0.9 \
        defusedxml==0.7.1 \
        entrypoints==0.3 \
        expat==2.4.1 \
        fontconfig==2.13.1 \
        freetype==2.10.4 \
        future==0.18.2 \
        glib==2.69.1 \
        google-auth==1.33.0 \
        google-auth-oauthlib==0.4.1 \
        grpcio==1.36.1 \
        gst-plugins-base==1.14.0 \
        gstreamer==1.14.0 \
        icu==58.2 \
        idna==2.10 \
        importlib-metadata==4.6.4 \
        importlib_metadata==4.6.4 \
        intel-openmp==2021.3.0 \
        ipykernel==6.2.0 \
        ipython==7.26.0 \
        ipython_genutils==0.2.0 \
        ipywidgets==7.5.1 \
        jedi==0.18.0 \
        jinja2==3.0.1 \
        joblib==1.0.1 \
        jpeg==9b \
        json5==0.9.6 \
        jsonschema==3.2.0 \
        jupyter_client==7.0.1 \
        jupyter_core==4.7.1 \
        jupyterlab==2.2.6 \
        jupyterlab_pygments==0.1.2 \
        jupyterlab_server==1.2.0 \
        kiwisolver==1.3.1 \
        lcms2==2.12 \
        ld_impl_linux-64==2.35.1 \
        libffi==3.3 \
        libgcc==7.2.0 \
        libgcc-ng==9.3.0 \
        libgfortran-ng==7.5.0 \
        libgfortran4==7.5.0 \
        libgomp==9.3.0 \
        libiconv \
        libpng==1.6.37 \
        libprotobuf==3.17.2 \
        libsodium==1.0.18 \
        libstdcxx-ng==9.3.0 \
        libtiff==4.2.0 \
        libuuid==1.0.3 \
        libwebp-base==1.2.0 \
        libxcb==1.14 \
        libxml2==2.9.12 \
        lz4-c==1.9.3 \
        markdown==3.3.4 \
        markupsafe==2.0.1 \
        matplotlib==3.3.1 \
        matplotlib-base==3.3.1 \
        matplotlib-inline==0.1.2 \
        minio==6.0.2 \
        mistune==0.8.4 \
        mkl==2019.4 \
        mkl-service==2.3.0 \
        mkl_fft==1.3.0 \
        mkl_random==1.1.0 \
        multidict==5.1.0 \
        nbclient==0.5.3 \
        nbconvert==6.1.0 \
        nbformat==5.1.3 \
        ncurses==6.2 \
        nest-asyncio==1.5.1 \
        ninja==1.10.2 \
        notebook==6.4.3 \
        numpy==1.19.1 \
        numpy-base==1.19.1 \
        oauthlib==3.1.1 \
        olefile==0.46 \
        openjpeg==2.4.0 \
        openssl==1.1.1l \
        packaging==21.0 \
        pandas==1.1.3 \
        pandocfilters==1.4.3 \
        parso==0.8.2 \
        pcre==8.45 \
        pexpect==4.8.0 \
        pickleshare==0.7.5 \
        pillow==8.3.1 \
        pip==20.2.4 \
        plotly==3.6.1 \
        prometheus_client==0.11.0 \
        prompt-toolkit==3.0.17 \
        protobuf==3.17.2 \
        ptyprocess==0.7.0 \
        pyasn1==0.4.8 \
        pyasn1-modules==0.2.8 \
        pycparser==2.20 \
        pydantic==1.6.1 \
        pygments==2.10.0 \
        pyjwt==2.1.0 \
        pyopenssl==20.0.1 \
        pyparsing==2.4.7 \
        pyqt==5.9.2 \
        pyrsistent==0.17.3 \
        pysocks==1.7.1 \
        python-dateutil==2.8.2 \
        python_abi==3.7 \
        pytorch==1.6.0 \
        pytorch-lightning==0.9.0 \
        pytz==2021.1 \
        pyyaml==5.4.1 \
        pyzmq==22.2.1 \
        qt==5.9.7 \
        readline==8.1 \
        requests==2.24.0 \
        requests-oauthlib==1.3.0 \
        retrying==1.3.3 \
        rsa==4.7.2 \
        scipy==1.5.2 \
        send2trash==1.5.0 \
        setuptools==52.0.0 \
        sip==4.19.8 \
        six==1.16.0 \
        sqlite==3.36.0 \
        tensorboard==2.2.0 \
        tensorboard-plugin-wit==1.6.0 \
        terminado==0.9.4 \
        testpath==0.5.0 \
        threadpoolctl==2.2.0 \
        tk==8.6.10 \
        tornado==6.1 \
        tqdm==4.48.2 \
        traitlets==5.0.5 \
        typing-extensions==3.10.0.0 \
        typing_extensions==3.10.0.0 \
        urllib3==1.25.11 \
        wcwidth==0.2.5 \
        webencodings==0.5.1 \
        werkzeug==1.0.1 \
        wheel==0.37.0 \
        widgetsnbextension==3.5.1 \
        xz==5.2.5 \
        yaml==0.2.5 \
        yarl==1.6.3 \
        zeromq==4.3.4 \
        zipp==3.5.0 \
        zlib==1.2.11 \
        zstd==1.4.9 \
    && conda clean -ya

RUN pip install -U --no-cache-dir \
    aurum==0.2.1 \
    cloudpickle==2.0.0 \
    dask==2021.12.0 \
    dill==0.3.4 \
    fsspec==2021.11.1 \
    imbalanced-learn==0.7.0 \
    locket==0.2.1 \
    multicoretsne==0.1 \
    nvidia-ml-py3==7.352.0 \
    pandarallel==1.5.4 \
    partd==1.2.0 \
    psutil==5.8.0 \
    scikit-learn==1.0.1 \
    seaborn==0.11.2 \
    sentencepiece==0.1.96 \
    sklearn==0.0 \
    stripping==0.2.6 \
    swifter==1.0.9 \
    tenacity==8.0.1 \
    toolz==0.11.2 \
    yellowbrick==1.3.post1
